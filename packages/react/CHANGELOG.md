# @pluv/react

## 0.38.6

### Patch Changes

- @pluv/client@0.38.6
- @pluv/crdt@0.38.6
- @pluv/types@0.38.6

## 0.38.5

### Patch Changes

- @pluv/client@0.38.5
- @pluv/crdt@0.38.5
- @pluv/types@0.38.5

## 0.38.4

### Patch Changes

- @pluv/client@0.38.4
- @pluv/crdt@0.38.4
- @pluv/types@0.38.4

## 0.38.3

### Patch Changes

- Updated dependencies [8346273]
  - @pluv/client@0.38.3
  - @pluv/crdt@0.38.3
  - @pluv/types@0.38.3

## 0.38.2

### Patch Changes

- Updated dependencies [de35f0b]
  - @pluv/client@0.38.2
  - @pluv/crdt@0.38.2
  - @pluv/types@0.38.2

## 0.38.1

### Patch Changes

- @pluv/client@0.38.1
- @pluv/crdt@0.38.1
- @pluv/types@0.38.1

## 0.38.0

### Patch Changes

- Updated dependencies [f4ceca3]
  - @pluv/client@0.38.0
  - @pluv/types@0.38.0
  - @pluv/crdt@0.38.0

## 0.37.7

### Patch Changes

- @pluv/client@0.37.7
- @pluv/crdt@0.37.7
- @pluv/types@0.37.7

## 0.37.6

### Patch Changes

- @pluv/client@0.37.6
- @pluv/crdt@0.37.6
- @pluv/types@0.37.6

## 0.37.5

### Patch Changes

- @pluv/client@0.37.5
- @pluv/crdt@0.37.5
- @pluv/types@0.37.5

## 0.37.4

### Patch Changes

- Updated dependencies [a9c3d17]
  - @pluv/client@0.37.4
  - @pluv/crdt@0.37.4
  - @pluv/types@0.37.4

## 0.37.3

### Patch Changes

- dff89ff: Added an error message for when `createBundle` functions are used outside of `PluvRoomProvider`.
- Updated dependencies [9ae837b]
  - @pluv/client@0.37.3
  - @pluv/crdt@0.37.3
  - @pluv/types@0.37.3

## 0.37.2

### Patch Changes

- Updated dependencies [11920af]
  - @pluv/client@0.37.2
  - @pluv/crdt@0.37.2
  - @pluv/types@0.37.2

## 0.37.1

### Patch Changes

- Updated dependencies [e923a8d]
  - @pluv/client@0.37.1
  - @pluv/crdt@0.37.1
  - @pluv/types@0.37.1

## 0.37.0

### Patch Changes

- @pluv/client@0.37.0
- @pluv/crdt@0.37.0
- @pluv/types@0.37.0

## 0.36.0

### Minor Changes

- 2a84951: **BREAKING**

  Removed re-exports of `@pluv/client` and `@pluv/crdt` parts from `@pluv/react`.

  ```ts
  // Before

  import { createBundle, createClient } from "@pluv/react";

  // After

  import { createClient } from "@pluv/client";
  import { createBundle } from "@pluv/react";
  ```

### Patch Changes

- Updated dependencies [4518b6d]
  - @pluv/client@0.36.0
  - @pluv/crdt@0.36.0
  - @pluv/types@0.36.0

## 0.35.4

### Patch Changes

- @pluv/client@0.35.4
- @pluv/crdt@0.35.4
- @pluv/types@0.35.4

## 0.35.3

### Patch Changes

- @pluv/client@0.35.3
- @pluv/crdt@0.35.3
- @pluv/types@0.35.3

## 0.35.2

### Patch Changes

- Updated dependencies [81cb692]
  - @pluv/types@0.35.2
  - @pluv/client@0.35.2
  - @pluv/crdt@0.35.2

## 0.35.1

### Patch Changes

- @pluv/client@0.35.1
- @pluv/crdt@0.35.1
- @pluv/types@0.35.1

## 0.35.0

### Patch Changes

- @pluv/client@0.35.0
- @pluv/crdt@0.35.0
- @pluv/types@0.35.0

## 0.34.1

### Patch Changes

- @pluv/client@0.34.1
- @pluv/crdt@0.34.1
- @pluv/types@0.34.1

## 0.34.0

### Patch Changes

- @pluv/client@0.34.0
- @pluv/crdt@0.34.0
- @pluv/types@0.34.0

## 0.33.0

### Minor Changes

- c3b07ab: Allow peer react@19.0.0.

### Patch Changes

- @pluv/client@0.33.0
- @pluv/crdt@0.33.0
- @pluv/types@0.33.0

## 0.32.9

### Patch Changes

- 89d004d: Fix event proxy types for client-side events.
  - @pluv/client@0.32.9
  - @pluv/crdt@0.32.9
  - @pluv/types@0.32.9

## 0.32.8

### Patch Changes

- @pluv/client@0.32.8
- @pluv/crdt@0.32.8
- @pluv/types@0.32.8

## 0.32.7

### Patch Changes

- @pluv/client@0.32.7
- @pluv/crdt@0.32.7
- @pluv/types@0.32.7

## 0.32.6

### Patch Changes

- @pluv/client@0.32.6
- @pluv/crdt@0.32.6
- @pluv/types@0.32.6

## 0.32.5

### Patch Changes

- @pluv/client@0.32.5
- @pluv/crdt@0.32.5
- @pluv/types@0.32.5

## 0.32.4

### Patch Changes

- @pluv/client@0.32.4
- @pluv/crdt@0.32.4
- @pluv/types@0.32.4

## 0.32.3

### Patch Changes

- 75e992f: Export `register` helper in `@pluv/react`.
- Updated dependencies [b18230f]
  - @pluv/client@0.32.3
  - @pluv/crdt@0.32.3
  - @pluv/types@0.32.3

## 0.32.2

### Patch Changes

- @pluv/client@0.32.2
- @pluv/crdt@0.32.2
- @pluv/types@0.32.2

## 0.32.1

### Patch Changes

- @pluv/client@0.32.1
- @pluv/crdt@0.32.1
- @pluv/types@0.32.1

## 0.32.0

### Patch Changes

- @pluv/client@0.32.0
- @pluv/crdt@0.32.0
- @pluv/types@0.32.0

## 0.31.0

### Patch Changes

- @pluv/client@0.31.0
- @pluv/crdt@0.31.0
- @pluv/types@0.31.0

## 0.30.2

### Patch Changes

- @pluv/client@0.30.2
- @pluv/crdt@0.30.2
- @pluv/types@0.30.2

## 0.30.1

### Patch Changes

- @pluv/client@0.30.1
- @pluv/crdt@0.30.1
- @pluv/types@0.30.1

## 0.30.0

### Patch Changes

- Updated dependencies [cff933a]
  - @pluv/client@0.30.0
  - @pluv/crdt@0.30.0
  - @pluv/types@0.30.0

## 0.29.0

### Minor Changes

- 525aeae: **BREAKING**

  Merge `createBundle` with `createRoomBundle`.

  ```ts
  // Before
  const {
    createRoomBundle,

    // components
    PluvProvider,

    // hooks
    useClient,
  } = createBundle(client);

  export const {
    // components
    MockedRoomProvider,
    PluvRoomProvider,

    // utils
    event,

    // hooks
    useBroadcast,
    useCanRedo,
    useCanUndo,
    useConnection,
    useDoc,
    useEvent,
    useMyPresence,
    useMyself,
    useOther,
    useOthers,
    useRedo,
    useRoom,
    useStorage,
    useTransact,
    useUndo,
  } = createRoomBundle({});

  // After
  const {
    // components
    MockedRoomProvider,
    PluvProvider,
    PluvRoomProvider,

    // utils
    event,

    // hooks
    useBroadcast,
    useCanRedo,
    useCanUndo,
    useClient,
    useConnection,
    useDoc,
    useEvent,
    useMyPresence,
    useMyself,
    useOther,
    useOthers,
    useRedo,
    useRoom,
    useStorage,
    useTransact,
    useUndo,
  } = createBundle(client);
  ```

### Patch Changes

- @pluv/client@0.29.0
- @pluv/crdt@0.29.0
- @pluv/types@0.29.0

## 0.28.0

### Minor Changes

- 778b43e: Remove the `initialStorage` option from `createRoomBundle`. This has been moved to `createClient`.

### Patch Changes

- @pluv/client@0.28.0
- @pluv/crdt@0.28.0
- @pluv/types@0.28.0

## 0.27.0

### Minor Changes

- 19ed36c: Updated `createClient` and `createRoomBundle` object params to better support automatic type inference.

  ```ts
  // Before
  import { createClient } from "@pluv/react";
  import { yjs } from "@pluv/crdt-yjs";
  import { z } from "zod";
  import type { ioServer } from "./server/ioServer";

  const client = createClient<typeof ioServer>({
    authEndpoint: ({ room }) => "MY_AUTH_URL",
    wsEndpoint: ({ room }) => "MY_WEBSOCKET_URL",
  });

  client.createRoom("my-example-room", {
    presence: z.object({
      selectionId: z.string().nullish(),
    }),
    initialPresence: {
      selectionId: null,
    },
    initialStorage: yjs.doc(() => ({
      messages: yjs.array<string>([]),
    })),
  });

  // After

  import { createBundle, createClient } from "@pluv/react";

  const client = createClient({
    authEndpoint: ({ room }) => "MY_AUTH_URL",
    wsEndpoint: ({ room }) => "MY_WEBSOCKET_URL",
    /**
     * @description The ioServer type now needs to be inferred on this property
     * instead of within the generic on `createClient`. This is because of
     * limitations with TypeScript not yet supporting partial type-inference
     * for generics. Ensure to no-loonger include any generics on `createClient`
     */
    infer: (i) => ({ io: i<typeof ioServer> }),
    // Now moved to `createClient` from `PluvClient.createRoom`
    presence: z.object({
      selectionId: z.string().nullish(),
    }),
    /**
     * @description Now added to `createClient` to specify defaults for all
     * rooms, and to infer types for storage. This value will be overwritten by
     * `PluvClient.createRoom`.
     */
    initialStorage: yjs.doc(() => ({
      messages: yjs.array<string>([]),
    })),
  });

  const { createRoomBundle } = createBundle(client);
  const pluv = createRoomBundle({});
  ```

### Patch Changes

- 19ed36c: Added client-side event router. This more-or-less mirrors the server-side event router. You can use both the server-side and client-side router simultaneously, but you should generally prefer only using one or the other.

  ```ts
  // Backend Server
  import { createIO } from "@pluv/io";

  const io = createIO({ /* ... */ });
  const ioServer = io.server({
      router: io.router({
          multiply2: io.procedure
              .input(z.object({ value: z.number() }))
              .broadcast(({ value }) => ({
                  multiplied2: { value: value * 2 },
              })),
      }),
  });

  // Frontend Client
  import { createBundle createClient } from "@pluv/react";

  const io = createClient({ /* ... */ });

  const { createRoomBundle } = createBundle(io);
  const pluv = createRoomBundle({
      // ...
      router: io.router({
          add5: io.procedure
              .input(z.object({ value: z.number() }))
              .broadcast(({ value }) => ({
                  /**
                   * @description Because `ioServer` does not specify `added5`,
                   * this will be forwarded to connected peers.
                   */
                  added5: { value: value + 5 },
              })),
          /**
           * @description This is possible, but not recommended to do. Because
           * `multiply2` is a procedure on `ioServer`, this will trigger the
           * `multiply2` procedure on `ioServer`. Connected peers will not
           * receive `multiply2`, but rather `multipled2`.
           */
          subtract5Multiply2: io.procedure
              .input(z.object({ value: z.number() }))
              .broadcast(({ value }) => ({
                  multiply2: { value: value - 5 },
              })),
      }),
  });
  ```

- Updated dependencies [19ed36c]
- Updated dependencies [19ed36c]
  - @pluv/client@0.27.0
  - @pluv/crdt@0.27.0
  - @pluv/types@0.27.0

## 0.26.0

### Minor Changes

- 19e5dda: **BREAKING**
  Update `authEndpoint` and `wsEndpoint` to now use a parameterized object that passes through additional data via a `metadata` property.

  ```tsx
  // Before

  import { env } from "./env";
  import type { ioServer } from "./server";

  const client = createClient<typeof ioServer>({
      authEndpoint: (room: string) => `${env.API_URL}}/room/${room}`,
      wsEndpoint: (room: string) => `${env.WS_URL}/room/${room}`,
  });

  // After

  const client = createClient<
      typeof ioServer,
      // Optional: You can specify types for metadata here. This is useful for Cloudflare Pages
      { apiUrl: string; wsUrl: string }
  >({
      authEndpoint: ({ metadata, room }) => `${metadata.apiUrl}}/room/${room}`,
      wsEndpoint: ({ metadata, room }) => `${{ metadata.wsUrl }}/room/${room}`,
  });

  client.createRoom("my-room", {
      // This property exists when the `metadata` generic type is defined above
      metadata: {
          apiUrl: "https://example.com/api",
          wsUrl: "wss://example.com/api",
      },
      // ...
  });

  <PluvRoomProvider
      // This property exists when the `metadata` generic type is defined above
      metadata={{
          apiUrl: "https://example.com/api",
          wsUrl: "wss://example.com/api",
      }}
  >
      {/* ... */}
  </PluvRoomProvider>
  ```

### Patch Changes

- Updated dependencies [19e5dda]
  - @pluv/client@0.26.0
  - @pluv/crdt@0.26.0
  - @pluv/types@0.26.0

## 0.25.4

### Patch Changes

- @pluv/client@0.25.4
- @pluv/crdt@0.25.4
- @pluv/types@0.25.4

## 0.25.3

### Patch Changes

- @pluv/client@0.25.3
- @pluv/crdt@0.25.3
- @pluv/types@0.25.3

## 0.25.2

### Patch Changes

- @pluv/client@0.25.2
- @pluv/crdt@0.25.2
- @pluv/types@0.25.2

## 0.25.1

### Patch Changes

- @pluv/client@0.25.1
- @pluv/crdt@0.25.1
- @pluv/types@0.25.1

## 0.25.0

### Patch Changes

- @pluv/client@0.25.0
- @pluv/crdt@0.25.0
- @pluv/types@0.25.0

## 0.24.1

### Patch Changes

- Updated dependencies [ba299e2]
  - @pluv/client@0.24.1
  - @pluv/crdt@0.24.1
  - @pluv/types@0.24.1

## 0.24.0

### Patch Changes

- @pluv/client@0.24.0
- @pluv/crdt@0.24.0
- @pluv/types@0.24.0

## 0.23.0

### Patch Changes

- @pluv/client@0.23.0
- @pluv/crdt@0.23.0
- @pluv/types@0.23.0

## 0.22.0

### Patch Changes

- @pluv/client@0.22.0
- @pluv/crdt@0.22.0
- @pluv/types@0.22.0

## 0.21.1

### Patch Changes

- @pluv/client@0.21.1
- @pluv/crdt@0.21.1
- @pluv/types@0.21.1

## 0.21.0

### Patch Changes

- Updated dependencies [b98ab6b]
  - @pluv/client@0.21.0
  - @pluv/crdt@0.21.0
  - @pluv/types@0.21.0

## 0.20.0

### Minor Changes

- 9492085: **BREAKING**: `@pluv/crdt-yjs` and `@pluv/crdt-loro` have been updated so that the utilities to create shared-types/containers no-longer return a wrapper around the underlying shared-types and containers, but rather return the shared-types/containers directly.

  This means that for methods such as `getStorage` from `@pluv/client` and `useStorage` from `@pluv/react`, the shared-types/containers are also returned instead of the wrapper types.

  The motivation for these changes are so that pluv.io is supplementary to `yjs` and `loro-crdt`, instead of having these libraries be an internal implementation of pluv.io.

  ```ts
  // Before

  import { yjs } from "@pluv/crdt-yjs";

  yjs.array([]); // Returns CrdtYjsArray
  yjs.object([]); // Returns CrdtYjsObject

  const room: PluvRoom = /* ... */;

  room.getStorage("messages"); // Returns AbstractCrdtType

  const [, sharedType] = useStorage("messages"); // sharedType is an AbstractCrdtType
  ```

  ```ts
  // Now

  import { yjs } from "@pluv/crdt-yjs";

  yjs.array([]); // Returns yjs.Array
  yjs.object([]); // Returns yjs.Map

  const room: PluvRoom = /* ... */;

  room.getStorage("messages"); // Returns yjs.AbstractType

  const [, sharedType] = useStorage("messages"); // sharedType is a yjs.AbstractType
  ```

  For `@pluv/crdt-loro` specifically, `@pluv/client` relies on [loro events and subscriptions](https://www.loro.dev/docs/tutorial/get_started#event) to detect changes. The `AbstractLoroCrdt` types previously called `Loro.commit` after each change as an abstraction, but now this no-longer happens. To ensure that changes to loro containers are properly handled in `@pluv/react`, make sure to commit your changes whenever possible:

  ```ts
  // Before

  const [data, container] = useStorage("messages");

  // This automatically called Loro.commit under the hood and rerendered the page with updated data.
  container.push(loro.object({ name: "John Doe", age: 35 }));
  ```

  ```ts
  // Now

  const [data, container] = useStorage("messages");

  const doc = useDoc();
  const transact = useTransact();

  // Updates need to be committed back to the doc whenever the changes need to be emitted to other users
  // The returned data also will not update until the changes are commited

  // The two operations below are functionally equivalent
  transact(() => {
    container.push(loro.object({ name: "John Doe", age: 35 }));
  });

  container.push(loro.object({ name: "John Doe", age: 35 }));
  doc.value.commit();
  ```

### Patch Changes

- Updated dependencies [9492085]
  - @pluv/client@0.20.0
  - @pluv/crdt@0.20.0
  - @pluv/types@0.20.0

## 0.19.0

### Minor Changes

- 798e32d: **Breaking**: useOthers now allows returning any data besides arrays when using a custom selector.
- 8450306: **Breaking**: Require minimum react version of ^18.0.0.

### Patch Changes

- 607afe3: Update the `updateMyPresence` function from `useMyPresence` to simply forward the function from the `PluvRoom`. This means all `updateMyPresence` functions should be the same underlying reference across all `useMyPresence` hooks.
- Updated dependencies [137444b]
- Updated dependencies [f5e4370]
  - @pluv/client@0.19.0
  - @pluv/crdt@0.19.0
  - @pluv/types@0.19.0

## 0.18.0

### Minor Changes

- 99b5ca9: ## Breaking Changes

  - `@pluv/io` has been updated to introduce `PluvProcedure`, `PluvRouter` and `PluvServer`. This change is intended to improve the ergonomics of declaring events and simplifying inferences of event types.

  ### Before:

  ```ts
  // backend/io.ts

  import { createIO } from "@pluv/io";
  import { createPluvHandler, platformNode } from "@pluv/platform-node";
  import { z } from "zod";

  export const io = createIO({
    platform: platformNode(),
  })
    .event("SEND_MESSAGE", {
      input: z.object({ message: z.string() }),
      resolver: ({ message }) => ({ RECEIVE_MESSAGE: { message } }),
    })
    .event("DOUBLE_VALUE", {
      input: z.object({ value: z.number() }),
      resolver: ({ value }) => ({ VALUE_DOUBLED: { value: value * 2 } }),
    });

  const Pluv = createPluvHandler({
    io,
    /* ... */
  });
  ```

  ```ts
  // frontend/pluv.ts

  import { createClient } from "@pluv/react";
  import type { io } from "../backend/io";

  const client = createClient<typeof io>({
    /* ... */
  });
  ```

  ### Now:

  ```ts
  import { createIO } from "@pluv/io";
  import { createPluvHandler, platformNode } from "@pluv/platform-node";
  import { z } from "zod";

  const io = createIO({
    platform: platformNode(),
  });

  const router = io.router({
    SEND_MESSAGE: io.procedure
      .input(z.object({ message: z.string() }))
      .broadcast(({ message }) => ({
        RECEIVE_MESSAGE: { message },
      })),
    DOUBLE_VALUE: io.procedure
      .input(z.object({ value: z.number() }))
      .broadcast(({ value }) => ({
        VALUE_DOUBLED: { value: value * 2 },
      })),
  });

  export const ioServer = io.server({ router });

  const Pluv = createPluvHandler({
    io: ioServer, // <- This uses the PluvServer now
    /* ... */
  });
  ```

  ```ts
  // frontend/pluv.ts

  import { createClient } from "@pluv/react";
  import type { ioServer } from "../backend/io";

  // This users the PluvServer type now
  const client = createClient<typeof ioServer>({
    /* ... */
  });
  ```

  - `PluvRouter` instances can also be merged via the `mergeRouters` method, which effectively performs an `Object.assign` of the events object and returns a new `PluvRouter` with the correct types:

  ```ts
  const router = io.mergeRouters(router1, router2);
  ```

- 07a7725: Added broadcast proxy as a new way to broadcast events to other users.

  ```tsx
  // backend

  const router = io.router({
    SEND_MESSAGE: io.procedure
      .input(z.object({ message: z.string() }))
      .broadcast(({ message }) => ({ RECEIVE_MESSAGE: { message } })),
  });

  // frontend
  const pluv = createRoomBundle(/* ... */);

  const broadcast = pluv.useBroadcast();

  // Both of the examples below are equivalent.

  broadcast("SEND_MESSAGE", { message: "Hello world~!" });

  broadcast.SEND_MESSAGE({ message: "Hello world~!" });
  ```

### Patch Changes

- e587c18: Added event proxy as a new way to listen to events.

  ```tsx
  // backend

  const router = io.router({
    SEND_MESSAGE: io.procedure
      .input(z.object({ message: z.string() }))
      .broadcast(({ message }) => ({ RECEIVE_MESSAGE: { message } })),
  });

  // frontend
  const pluv = createRoomBundle(/* ... */);

  // Both of the examples below are equivalent.

  pluv.useEvent("RECEIVE_MESSAGE", ({ data }) => {
    const { message } = data;

    console.log(message);
  });

  pluv.event.RECEIVE_MESSAGE.useEvent(({ data }) => {
    const { message } = data;

    console.log(message);
  });
  ```

- Updated dependencies [06c67be]
- Updated dependencies [99b5ca9]
- Updated dependencies [df1342c]
  - @pluv/client@0.18.0
  - @pluv/types@0.18.0
  - @pluv/crdt@0.18.0

## 0.17.3

### Patch Changes

- @pluv/client@0.17.3
- @pluv/crdt@0.17.3
- @pluv/types@0.17.3

## 0.17.2

### Patch Changes

- @pluv/client@0.17.2
- @pluv/crdt@0.17.2
- @pluv/types@0.17.2

## 0.17.1

### Patch Changes

- @pluv/client@0.17.1
- @pluv/crdt@0.17.1
- @pluv/types@0.17.1

## 0.17.0

### Patch Changes

- Updated dependencies [507bc00]
  - @pluv/types@0.17.0
  - @pluv/client@0.17.0
  - @pluv/crdt@0.17.0

## 0.16.3

### Patch Changes

- @pluv/client@0.16.3
- @pluv/crdt@0.16.3
- @pluv/types@0.16.3

## 0.16.2

### Patch Changes

- @pluv/client@0.16.2
- @pluv/crdt@0.16.2
- @pluv/types@0.16.2

## 0.16.1

### Patch Changes

- @pluv/client@0.16.1
- @pluv/crdt@0.16.1
- @pluv/types@0.16.1

## 0.16.0

### Minor Changes

- 995aa9c: Renamed all hooks from `@pluv/react` to be simply prefixed with `use` instead of `usePluv` (e.g. `usePluvStorage` is now just `useStorage`).

  Hooks can be aliased to retain the same names if preferred:

  ```ts
  export const {
    // ...
    useStorage: usePluvStorage,
    useTransact: usePluvTransact,
    // ...
  } = createRoomBundle(/* */);
  ```

- 4280220: ## Breaking Changes

  - Storage types are now kept on the root of the document.
    - Previously, `@pluv/crdt-yjs` kept all shared-types on a hidden Yjs Map called `storage` on the root of the Yjs Doc. Now all shared-types are kept on the root of the Yjs Doc instead. This behavior should be more in-line with how shared-types are documented to be used from Yjs.
  - `@pluv/client` and `@pluv/react` no-longer re-export `@pluv/crdt-yjs`. This package will now need to be installed separately.

    ```bash
    # if installing @pluv/client
    npm install @pluv/client @pluv/crdt-yjs
    # if installing @pluv/react
    npm install @pluv/react @pluv/crdt-yjs
    ```

    ```ts
    // Before:
    import { createClient, y } from "@pluv/client";
    // After:
    import { createClient } from "@pluv/client";
    import { yjs } from "@pluv/crdt-yjs"; // y renamed to yjs
    ```

  - The `y` import has been renamed to `yjs`.
    ```ts
    // Before:
    import { y } from "@pluv/crdt-yjs";
    // After:
    import { yjs } from "@pluv/crdt-yjs";
    ```
  - `@pluv/crdt-yjs` functions no-longer return Yjs shared-types directly, but instead return an `AbstractCrdtType` from `@pluv/crdt` (new package). This also affects methods that return storage shared types in both `@pluv/client` and `@pluv/react` from functions like `PluvRoom.getStorage` and `PluvRoom.useStorage`.

    ```ts
    // Before:
    import { y } from "@pluv/crdt-yjs";
    import type { Array as YArray, Map as YMap } from "yjs";

    const array: YArray<YMap<{ message: string }>> = y.array([
      y.object({ message: "Hello" }),
    ]);

    array.push([y.object({ message: "World!" })]);

    // After:
    import type { CrdtYjsArray, CrdtYjsObject } from "@pluv/crdt-yjs";
    import { yjs } from "@pluv/crdt-yjs";
    import type { Array as YArray } from "yjs";

    const array: CrdtYjsArray<CrdtYjsObject<{ message: string }>> = yjs.array([
      yjs.object({ message: "Hello" }),
    ]);

    array.push(yjs.object({ message: "World!" }));

    // use .value to get the underlying yjs type
    const yarray: YArray<YMap<{ message: string }>> = array.value;
    ```

  - `initialStorage` must now use the `doc` function from `@pluv/crdt-yjs` to be defined. This also affects `@pluv/react`.

    ```ts
    // Before:
    import { createClient, y } from "@pluv/client";

    const client = createClient({
      /* ... */
    });

    client.createRoom({
      // ...
      initialStorage: () => ({
        messages: y.array([y.object({ message: "Hello world!" })]),
      }),
    });

    // After:
    import { createClient } from "@pluv/client";
    // This is now imported separately
    import { yjs } from "@pluv/crdt-yjs";

    const client = createClient({
      /* ... */
    });

    client.createRoom({
      // ...
      initialStorage: yjs.doc(() => ({
        messages: yjs.array([yjs.object({ message: "Hello world!" })]),
      })),
    });
    ```

  - `@pluv/client` can now instead use [loro](https://github.com/loro-dev/loro) instead of [yjs](https://github.com/yjs/yjs).
    ```bash
    npm install @pluv/client @pluv/crdt-loro loro-crdt
    ```
  - If you are using storage features with pluv, `@pluv/io` must now specify which crdt library (i.e. `@pluv/crdt-yjs` or `@pluv/crdt-loro`) it is meant to use.

    ```ts
    import { loro } from "@pluv/crdt-loro";
    import { yjs } from "@pluv/crdt-yjs";
    import { createIO } from "@pluv/io";

    const io = createIO({
      // ...
      // If using loro
      crdt: loro,
      // If using yjs
      crdt: yjs,
    });
    ```

  - `PluvRoom.getDoc()` from `@pluv/client` no-longer returns the Yjs Doc instance, but rather a `AbstractCrdtDoc` instance from `@pluv/crdt`. This also affects the hook from `@pluv/react`.

    ```ts
    // Before:
    import { Doc as YDoc } from "yjs";

    const room: PluvRoom = client.createRoom({
      /* ... */
    });

    const doc: YDoc = room.getDoc();

    // After:
    import { CrdtYjsDoc } from "@pluv/crdt-yjs";
    import { Doc as YDoc } from "yjs";

    const room: PluvRoom = client.createRoom({
      /* ... */
    });

    const doc: CrdtYjsDoc<any> = room.getDoc();
    const ydoc: YDoc = doc.value;
    ```

  - `@pluv/client` and `@pluv/react` now may return `null` when retrieving storage while storage is being initialized.

    ```ts
    const sharedType = room.getStorage("messages"); // This may be null

    const [data, sharedType] = useStorage("messages"); // data and sharedType may both be null
    ```

### Patch Changes

- Updated dependencies [4280220]
  - @pluv/client@0.16.0
  - @pluv/crdt@0.16.0
  - @pluv/types@0.16.0

## 0.15.0

### Patch Changes

- @pluv/client@0.15.0
- @pluv/types@0.15.0

## 0.14.1

### Patch Changes

- @pluv/client@0.14.1
- @pluv/types@0.14.1

## 0.14.0

### Patch Changes

- @pluv/client@0.14.0
- @pluv/types@0.14.0

## 0.13.0

### Minor Changes

- 4c4b47f: Added `useDoc` to access the root Yjs doc.

  ```ts
  import type { Doc } from "yjs";

  const doc: Doc = useDoc();
  ```

### Patch Changes

- Updated dependencies [1126215]
  - @pluv/client@0.13.0
  - @pluv/types@0.13.0

## 0.12.3

### Patch Changes

- da9f600: Upgraded dependencies
- Updated dependencies [da9f600]
  - @pluv/client@0.12.3
  - @pluv/types@0.12.3

## 0.12.2

### Patch Changes

- 259a7da: Bumped dependencies

## 0.12.1

### Patch Changes

- cae08aa: Updated storage from `getStorage` to never return null
- Updated dependencies [cae08aa]
  - @pluv/client@0.12.1
  - @pluv/types@0.12.1

## 0.12.0

### Minor Changes

- 436040b: Added ability to undo and redo changes to storage.

  ## @pluv/crdt-yjs

  `@pluv/crdt-yjs` now exposes 5 new methods: `canRedo`, `canUndo`, `redo`, `undo` and `trackOrigins`.

  Refer to the code-example below to better understand how to undo and redo with your doc.

  ```ts
  // Example
  import { array, doc } from "@pluv/crdt-yjs";

  // Create your doc with your shared-types
  const myDoc = doc({
    messages: array<string>([]),
  });

  /**
   * @description Track origins to enable undos and redos for your document.
   * trackOrigins must be called before any storage mutations, to enable those
   * mutations to be undone/redone.
   */
  myDoc.trackOrigins({
    /**
     * @description This is the same `captureTimeout` option from yjs's UndoManager.
     * This specifies a number in ms, during which edits are merged together to be
     * undone together. Set this to 0, to track each transacted change individually.
     * @see (@link https://docs.yjs.dev/api/undo-manager)
     * @default 500
     */
    captureTimeout: 500,
    /**
     * @desription This is the same `trackedOrigins` option from yjs's UndoManager.
     * This specifies transaction origins (strings only) to filter which transactions
     * can be undone.
     * @see (@link https://docs.yjs.dev/api/undo-manager)
     * @default undefined
     */
    trackedOrigins: ["user-123"],
  });

  /**
   * @description Check whether calling undo will mutate storage
   * @returns boolean
   */
  myDoc.canUndo();
  /**
   * @description Check whether calling redo will mutate storage
   * @returns boolean
   */
  myDoc.canRedo();

  // Perform a storage mutation within a transaction so that it can be affected
  // by undo/redo operations.
  myDoc.transact(() => {
    myDoc.get("messages").push(["hello world!"]);
  }, "user-123");

  /**
   * @description Undoes the last valid mutation to storage
   */
  myDoc.undo();

  /**
   * @description Re-applies the last undone mutation to storage
   */
  myDoc.redo();
  ```

  ## @pluv/client

  `@pluv/client`'s `PluvRoom` and `MockedRoom` now exposes 5 new methods: `canRedo`, `canUndo`, `redo`, `undo` and `transact`.

  Refer to the code-example below to better understand how to undo and redo with your `PluvRoom`.

  ```ts
  import { createClient, y } from "@pluv/client";

  const client = createClient({});

  /**
   * @description When a room is created, undo/redo will automatically
   * be configured to filter for changes made by the connected user
   * (so that users only undo/redo their changes).
   */
  const room = client.createRoom("my-room", {
    initialStorage: () => ({
      messages: y.array<string>([]),
    }),
    /**
     * @description This is the same `captureTimeout` option from yjs's UndoManager.
     * This specifies a number in ms, during which edits are merged together to be
     * undone together. Set this to 0, to track each transacted change individually.
     * @see (@link https://docs.yjs.dev/api/undo-manager)
     * @default 500
     */
    captureTimeout: 500,
    /**
     * @desription This is the same `trackedOrigins` option from yjs's UndoManager.
     * This specifies transaction origins (strings only) to filter which transactions
     * can be undone.
     * When omitted, the user's connection id will be tracked. When provided,
     * specifies additional tracked origins besides the user's connection id.
     * @see (@link https://docs.yjs.dev/api/undo-manager)
     * @default undefined
     */
    trackedOrigins: ["user-123"],
  });

  /**
   * @description Check whether calling undo will mutate storage
   * @returns boolean
   */
  room.canUndo();
  /**
   * @description Check whether calling redo will mutate storage
   * @returns boolean
   */
  room.canRedo();

  /**
   * @description Calling transact will enable a storage mutation to be undone/redone.
   * When called without an origin, the origin will default to the user's connection
   * id.
   *
   * You can specify a 2nd parameter to transact with a different transaction origin.
   */
  room.transact(() => {
    room.get("messages").push(["hello world!"]);
  });

  // This will also be undoable because `"user-123"` is a tracked origin.
  room.transact(() => {
    room.get("messages").push(["hello world!"]);
  }, "user-123");

  /**
   * @description Undoes the last valid mutation to storage
   */
  room.undo();

  /**
   * @description Re-applies the last undone mutation to storage
   */
  room.redo();
  ```

  ## @pluv/react

  `@pluv/react`'s `createRoomBundle` now exposes 5 new react hooks: `useCanRedo`, `useCanUndo`, `useRedo`, `useUndo` and `useTransact`.

  Refer to the code-example below to better understand how to undo and redo with your `createRoomBundle`.

  ```tsx
  import { createBundle, createClient, y } from "@pluv/react";
  import { type io } from "./io";

  const client = createClient<typeof io>();

  const { createRoomBundle } = createBundle(client);

  const { useCanRedo, useCanUndo, useRedo, useStorage, useTransact, useUndo } =
    createRoomBundle({
      initialStorage: () => ({
        messages: y.array<string>([]),
      }),
      /**
       * @description This is the same `captureTimeout` option from yjs's UndoManager.
       * This specifies a number in ms, during which edits are merged together to be
       * undone together. Set this to 0, to track each transacted change individually.
       * @see (@link https://docs.yjs.dev/api/undo-manager)
       * @default 500
       */
      captureTimeout: 500,
      /**
       * @desription This is the same `trackedOrigins` option from yjs's UndoManager.
       * This specifies transaction origins (strings only) to filter which transactions
       * can be undone.
       * When omitted, the user's connection id will be tracked. When provided,
       * specifies additional tracked origins besides the user's connection id.
       * @see (@link https://docs.yjs.dev/api/undo-manager)
       * @default undefined
       */
      trackedOrigins: ["user-123"],
    });

  /**
   * @description Check whether calling undo will mutate storage
   */
  const canUndo: boolean = useCanUndo();
  /**
   * @description Check whether calling redo will mutate storage
   */
  const canRedo: boolean = useCanRedo();

  const [messages, sharedType] = useStorage("messages");

  /**
   * @description Calling transact will enable a storage mutation to be undone/redone.
   * When called without an origin, the origin will default to the user's connection
   * id.
   *
   * You can specify a 2nd parameter to transact with a different transaction origin.
   */
  const transact = useTransact();

  transact(() => {
    sharedType.push(["hello world!"]);
  });

  // This will also be undoable because `"user-123"` is a tracked origin.
  transact(() => {
    sharedType.push(["hello world!"]);
  }, "user-123");

  /**
   * @description Undoes the last valid mutation to storage
   */
  const undo = useUndo();

  undo();

  /**
   * @description Re-applies the last undone mutation to storage
   */
  const redo = useRedo();

  redo();
  ```

### Patch Changes

- Updated dependencies [436040b]
  - @pluv/client@0.12.0
  - @pluv/types@0.12.0

## 0.11.1

### Patch Changes

- 74b3061: Bumped minor and patch dependencies.
- Updated dependencies [74b3061]
  - @pluv/client@0.11.1
  - @pluv/types@0.11.1

## 0.11.0

### Patch Changes

- @pluv/client@0.11.0
- @pluv/types@0.11.0

## 0.10.3

### Patch Changes

- @pluv/client@0.10.3
- @pluv/types@0.10.3

## 0.10.2

### Patch Changes

- @pluv/client@0.10.2
- @pluv/types@0.10.2

## 0.10.1

### Patch Changes

- 885835d: remove unnecessary dependency
- Updated dependencies [885835d]
  - @pluv/client@0.10.1
  - @pluv/types@0.10.1

## 0.10.0

### Minor Changes

- f43f1cc: Change packages to all be versioned together for consistency.

### Patch Changes

- Updated dependencies [f43f1cc]
  - @pluv/client@0.10.0
  - @pluv/types@0.10.0

## 0.6.2

### Patch Changes

- f4317ba: \* Renamed type `unstable_YObjectValue` to `YObjectValue`;

  - Renamed type `unstable_YObject` to `YObject`.
  - Re-exported `xmlElement`, `xmlFragment` and `xmlText` from `@pluv/client`.

    ```ts
    import { y } from "@pluv/client";
    // or
    import { y } from "@pluv/react";

    y.xmlElement("MyElement", {});
    y.xmlFragment({});
    y.xmlText("hello world");
    ```

- Updated dependencies [f4317ba]
  - @pluv/client@0.9.2

## 0.6.1

### Patch Changes

- 8fba48b: fix including incorrect dependency
- 8997c65: bumped dependencies
- Updated dependencies [8fba48b]
- Updated dependencies [8997c65]
  - @pluv/client@0.9.1
  - @pluv/types@0.2.2

## 0.6.0

### Minor Changes

- 829d31b: Added support for defining persistant frontend storage for rooms via a new `addons` option on rooms.

  This also introduces the first new addon `@pluv/addon-indexeddb`, which is more-or-less the equivalent to `y-indexeddb` which you can install like so:

  ```
  npm install @pluv/addon-indexeddb
  ```

  To use this new addon, simply pass it to options when creating a room:

  ```ts
  import { addonIndexedDB } from "@pluv/addon-indexeddb";
  import { createClient } from "@pluv/client";

  const client = createClient({
    // ...
  });

  const room = client.createRoom("my-new-room", {
    addons: [
      // Define your addons in an array like so
      addonIndexedDB(),
    ],
  });
  ```

  Or when using `@pluv/react`:

  ```ts
  const PluvRoom = createRoomBundle({
    // ...
    addons: [
      // Define your addons in an array like so
      addonIndexedDB(),
    ],
  });
  ```

### Patch Changes

- 8d11672: bumped dependencies to latest
- Updated dependencies [8d11672]
- Updated dependencies [829d31b]
  - @pluv/client@0.9.0
  - @pluv/types@0.2.1

## 0.5.11

### Patch Changes

- 2c9c5c3: changed my-presence to be non-nullable
- Updated dependencies [2c9c5c3]
  - @pluv/client@0.8.1

## 0.5.10

### Patch Changes

- 5bbfb98: fix not properly handling unauthorized checks
- b85a232: bumped dependencies
- Updated dependencies [5bbfb98]
- Updated dependencies [b85a232]
- Updated dependencies [fde89cf]
  - @pluv/client@0.8.0
  - @pluv/types@0.2.0

## 0.5.9

### Patch Changes

- 3518a83: bumped dependencies
- Updated dependencies [0dd847e]
- Updated dependencies [bb2886b]
- Updated dependencies [ae679a8]
- Updated dependencies [bb2886b]
- Updated dependencies [3518a83]
  - @pluv/client@0.7.0
  - @pluv/types@0.2.0

## 0.5.8

### Patch Changes

- 7ad4967: fixed user's presence not updating locally while offline
- Updated dependencies [7ad4967]
- Updated dependencies [4535687]
  - @pluv/client@0.6.5
  - @pluv/types@0.1.6

## 0.5.7

### Patch Changes

- 78fd644: updated readmes with links to the documentation website
- Updated dependencies [78fd644]
  - @pluv/client@0.6.4

## 0.5.6

### Patch Changes

- 850626e: bumped dependencies
- Updated dependencies [850626e]
  - @pluv/client@0.6.3
  - @pluv/types@0.1.6

## 0.5.5

### Patch Changes

- 9ae251d: bumped dependencies
- Updated dependencies [9ae251d]
  - @pluv/client@0.6.2

## 0.5.4

### Patch Changes

- 19433af: updated MockedRoomProvider events to allow partial events
- b80c555: updated react hooks to not re-render if state is deeply equal by default
- 74870ee: bumped dependencies
- Updated dependencies [19433af]
- Updated dependencies [74870ee]
  - @pluv/client@0.6.1
  - @pluv/types@0.1.5

## 0.5.3

### Patch Changes

- 57ae13f: bumped dependencies
  - @pluv/client@0.6.0
  - @pluv/types@0.1.4

## 0.5.2

### Patch Changes

- 9516a4e: updated typescript to 5.0
- 7b6da1c: bumped dependencies
- e9c1514: bumped dependencies
- 9d1829c: chore: bumped dependencies
- Updated dependencies [e1308e3]
- Updated dependencies [9516a4e]
- Updated dependencies [e1308e3]
- Updated dependencies [7b6da1c]
- Updated dependencies [e9c1514]
- Updated dependencies [9d1829c]
  - @pluv/client@0.6.0
  - @pluv/types@0.1.4

## 0.5.1

### Patch Changes

- 161e00e: fixed links to other pluv packages in readmes
- f6c0e65: bumped dependencies
- Updated dependencies [161e00e]
- Updated dependencies [f6c0e65]
  - @pluv/client@0.5.1
  - @pluv/types@0.1.3

## 0.5.0

### Minor Changes

- 327a6ef: renamed y.unstable\_\_object to y.object

### Patch Changes

- 78a6119: Fixed MockedRoom not sending storage updates
- 8bf62cb: bumped dependencies
- 7e52685: Bumped dependencies
- b1cb325: Updated dependencies
- b4e34bc: chore(deps): update dependency @types/react to v18.0.28
- ec50c73: fix: fixed mocked room not working
- 8e97fb2: Updated dependencies
- Updated dependencies [78a6119]
- Updated dependencies [8bf62cb]
- Updated dependencies [7e52685]
- Updated dependencies [b1cb325]
- Updated dependencies [327a6ef]
- Updated dependencies [8e97fb2]
  - @pluv/client@0.5.0
  - @pluv/types@0.1.3

## 0.4.0

### Minor Changes

- 043c915: Added MockedDataProvider from createRoomBundle

### Patch Changes

- 93f8c54: chore(deps): update dependency @types/react to v18.0.27
- Updated dependencies [595e66f]
  - @pluv/client@0.4.0

## 0.3.0

### Minor Changes

- 043c915: Added MockedDataProvider from createRoomBundle

### Patch Changes

- 93f8c54: chore(deps): update dependency @types/react to v18.0.27
- Updated dependencies [595e66f]
  - @pluv/client@0.3.0

## 0.2.0

### Minor Changes

- 95b5ef8: breaking: update PluvRoom.broadcast api

### Patch Changes

- Updated dependencies [95b5ef8]
  - @pluv/client@0.2.0
  - @pluv/types@0.1.2

## 0.1.3

### Patch Changes

- fe80d7b: added preview disclaimer about breaking changes in the readme
- Updated dependencies [fe80d7b]
  - @pluv/client@0.1.3
  - @pluv/types@0.1.2

## 0.1.2

### Patch Changes

- @pluv/client@0.1.2

## 0.1.1

### Patch Changes

- 24016e6: Updated dependencies
- Updated dependencies [23a7382]
- Updated dependencies [24016e6]
  - @pluv/client@0.1.1
  - @pluv/types@0.1.1

## 0.1.0

### Minor Changes

- a22f525: Added documentation

### Patch Changes

- Updated dependencies [a22f525]
  - @pluv/client@0.1.0
  - @pluv/types@0.1.0
