import type { Page } from "@playwright/test";
import { chromium } from "@playwright/test";

const WIDTH = 640;
const HEIGHT = 800;

export const openTestPage = async (url: string): Promise<Page> => {
    const browser = await chromium.launch({
        args: [
            `--no-sandbox`,
            `--disable-setuid-sandbox`,
            `--window-size=${WIDTH},${HEIGHT}`,
            `--window-position=0,0`,
            "--disable-dev-shm-usage",
        ],
    });

    const context = await browser.newContext({
        viewport: { width: WIDTH, height: HEIGHT },
    });

    const page: Page = await context.newPage();

    await page.goto(url);

    return page;
};
