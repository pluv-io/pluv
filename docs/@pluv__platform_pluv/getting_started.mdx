---
title: "Getting Started"
description: "Learn how to quickly setup and get started on the pluv.io network"
---

# Getting Started

Learn how to quickly setup and get started on the pluv.io network.

For the most part, setting up `@pluv/io` on the pluv.io network is not too different from setting it up when self-hosting on either the [Node.js](https://nodejs.org/) or [Cloudflare Workers](https://workers.cloudflare.com/) runtimes. The following examples will assume an application running on [Next.js](https://nextjs.org/).

## Installation

Here is the example installation for [npm](https://www.npmjs.com/).

```bash
# For the server
npm install @pluv/io @pluv/platform-pluv

# For the client
npm install @pluv/react
# Client peer-dependencies
npm install react react-dom zod @types/react @types/react-dom

# If you want to use storage features, install your preferred CRDT (yjs or loro)
npm install @pluv/crdt-yjs yjs

# Client + server peer dependencies
npm install zod
```

## Create a project

To use pluv.io, you will need to create a project. Each project corresponds to one [PluvIO](/docs/io/api-reference#PluvIO) instance that is created via [@pluv/io](https://www.npmjs.com/package/@pluv/io)'s [createIO](/docs/io/api-reference#createIO) function.

You can create a new project from the [pluv.io dashboard](/app) by clicking on **Add project** from the sidebar.

<img width="80%" src="https://raw.githubusercontent.com/pluv-io/pluv/refs/heads/master/assets/create_project_dashboard.png" alt="Create project from the sidebar" loading="lazy" />

### Project CRDT

When creating a project, you can set the project's CRDT to either use [yjs](https://docs.yjs.dev/) via [@pluv/crdt-yjs](https://www.npmjs.com/package/yjs) or [loro](https://loro.dev/) via [@pluv/crdt-loro](https://www.npmjs.com/package/loro-crdt). Note that this selection cannot be changed once the project is created.

<img width="48%" src="https://raw.githubusercontent.com/pluv-io/pluv/refs/heads/master/assets/create_project_dialog.png" alt="Create project from the sidebar" loading="lazy" />

### Project API Keys

To connect to the pluv.io network, you will need to create a secret key. Both the secret and publishable keys must be copied and saved as environment variables for your app.

<img width="80%" src="https://raw.githubusercontent.com/pluv-io/pluv/refs/heads/master/assets/create_api_keys.png" alt="Create project from the sidebar" loading="lazy" />

## Setting up pluv.io on Next.js

Let's step through how we'd put together a real-time API for Next.js and connect to the pluv.io end-to-end.

### Defining a backend [PluvIO](/docs/io#PluvIO) instance

```ts
// backend/io.ts

import { yjs } from "@pluv/crdt-yjs";
import { createIO } from "@pluv/io";
import { platformPluv } from "@pluv/platform-pluv";
import { z } from "zod";
import { db } from "./database";

export const io = createIO(
    platformPluv({
        // Required: Authorization is required for `@pluv/platform-pluv`
        authorize: {
            // Required: The user schema
            // Note: Must be JSON serializable
            // Note: Keep this schema lean (i.e. < 1,024 bytes) else errors
            // may be encountered
            user: z.object({
                // Required: id field is required
                id: z.string(),
                // All other fields are optional (whatever is needed to
                // represent users in the app)
                name: z.string(),
            }),
        },
        // Optional: Context that will be accessable from server event
        // listeners
        context: () => ({
            db,
        }),
        // Optional: Only if you require CRDT features
        // It must match what was configured when your project was created
        crdt: yjs,
        // Required: The API keys saved from the previous step
        publicKey: process.env.PLUV_PUBLISHABLE_KEY!,
        secretKey: process.env.PLUV_SECRET_KEY!,
        // Required: The route where your pluv webhooks will be located
        basePath: "/api/pluv",
    }),
);

export const ioServer = io.server();
```

### Setting up server events

```ts
// backend/io.ts

// ...

export const ioServer = io.server({
    getInitialStorage: async ({ context, room }) => {
        const { db } = context;

        const encodedState = await db
            .select({ encodedState: room.encodedState })
            .where(eq(room.name, room))
            .limit(1)
            .then((result) => result[0]?.encodedState ?? null);

        return encodedState;
    },
    onRoomDeleted: async ({ context, encodedState, room }) => {
        const { db } = context;

        const roomId = const existing = await db
            .select()
            .where(eq(room.name, room))
            .limit(1)
            .then((result) => result[0]?.id ?? null);

        if (roomId === null) {
            await db
                .insert(room)
                .values({ encodedState, name: room });

            return;
        }

        await db
            .update(room)
            .where(eq(room.id, roomId))
            .set({ encodedState });
    },
    onUserConnected: async ({ context, encodedState, room, user }) => {
        // ...
    },
    onUserDisconnected: async ({ context, encodedState, room, user }) => {
        // ...
    },
});
```
